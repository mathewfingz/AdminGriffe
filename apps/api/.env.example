# AdminGriffe API - Environment Configuration Template
# Copy this file to .env and update the values for your environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Primary Database (PostgreSQL) - Required
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/admingriffe"

# Secondary Databases (Optional - for multi-engine sync)
MYSQL_URL="mysql://root:mysql@localhost:3306/admingriffe_mysql"
MONGODB_URL="mongodb://localhost:27017/admingriffe_mongo"

# =============================================================================
# CACHE & MESSAGE QUEUE
# =============================================================================

# Redis - Required for caching and pub/sub
REDIS_URL="redis://localhost:6379"

# RabbitMQ - Required for async processing
RABBITMQ_URL="amqp://guest:guest@localhost:5672"

# Kafka - Optional for high-throughput streaming
KAFKA_BROKERS="localhost:9092"
KAFKA_CLIENT_ID="admingriffe-api"

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration - CHANGE IN PRODUCTION
JWT_SECRET="your-super-secret-jwt-key-minimum-32-characters-long"
JWT_REFRESH_SECRET="your-super-secret-refresh-key-minimum-32-characters-long"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# Password Hashing
BCRYPT_ROUNDS=12

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# AUDIT SYSTEM CONFIGURATION
# =============================================================================

# Audit System
AUDIT_ENABLED=true
AUDIT_SIGNATURE_KEY="your-audit-signature-key-change-in-production-minimum-32-chars"
AUDIT_RETENTION_DAYS=2555  # 7 years for SOX compliance
AUDIT_BATCH_SIZE=1000
AUDIT_COMPRESSION_ENABLED=true

# Digital Signatures for Audit Integrity
AUDIT_SIGN_ALGORITHM="RS256"
AUDIT_PRIVATE_KEY_PATH="/path/to/audit-private-key.pem"
AUDIT_PUBLIC_KEY_PATH="/path/to/audit-public-key.pem"

# =============================================================================
# SYNCHRONIZATION CONFIGURATION
# =============================================================================

# Sync Engine
SYNC_ENABLED=true
SYNC_BATCH_SIZE=1000
SYNC_RETRY_ATTEMPTS=3
SYNC_RETRY_DELAY=1000
SYNC_CONFLICT_RESOLUTION="timestamp"  # timestamp, priority, manual
SYNC_MAX_LAG_MS=100

# Sync Targets Configuration
SYNC_PG_TO_MYSQL=true
SYNC_PG_TO_MONGO=true
SYNC_MYSQL_TO_PG=false
SYNC_MONGO_TO_PG=false

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Server
PORT=3001
NODE_ENV="development"  # development, staging, production
API_PREFIX="/api/v1"

# CORS
CORS_ORIGIN="http://localhost:3000,http://localhost:3001"
CORS_CREDENTIALS=true

# File Upload
MAX_FILE_SIZE=10485760  # 10MB
UPLOAD_PATH="./uploads"

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH="/metrics"

# Health Checks
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# Performance Monitoring
PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD=1000  # ms

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging
LOG_LEVEL="info"  # error, warn, info, debug
LOG_FORMAT="json"  # json, simple
LOG_FILE_ENABLED=true
LOG_FILE_PATH="./logs/app.log"
LOG_MAX_SIZE="10m"
LOG_MAX_FILES=5

# Audit Logging
AUDIT_LOG_LEVEL="info"
AUDIT_LOG_FILE="./logs/audit.log"

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Email Service (for notifications)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"

# Notification Webhooks
WEBHOOK_AUDIT_ALERTS="https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
WEBHOOK_SYNC_ALERTS="https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"

# Firebase Configuration
FIREBASE_API_KEY="your-firebase-api-key"
FIREBASE_AUTH_DOMAIN="your-project.firebaseapp.com"
FIREBASE_PROJECT_ID="your-project-id"
FIREBASE_STORAGE_BUCKET="your-project.appspot.com"
FIREBASE_MESSAGING_SENDER_ID="123456789"
FIREBASE_APP_ID="1:123456789:web:abcdef123456"
FIREBASE_MEASUREMENT_ID="G-XXXXXXXXXX"
# Firebase Service Account Key (JSON string for server-side operations)
FIREBASE_SERVICE_ACCOUNT_KEY='{"type":"service_account","project_id":"your-project",...}'

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Development
DEV_ENABLE_PLAYGROUND=true
DEV_ENABLE_INTROSPECTION=true
DEV_CORS_ORIGIN="*"

# Testing
TEST_DATABASE_URL="postgresql://postgres:postgres@localhost:5432/admingriffe_test"
TEST_REDIS_URL="redis://localhost:6379/1"
TEST_TIMEOUT=30000

# =============================================================================
# PRODUCTION OPTIMIZATIONS
# =============================================================================

# Clustering
CLUSTER_ENABLED=false
CLUSTER_WORKERS=0  # 0 = auto (CPU cores)

# Caching
CACHE_TTL=300  # 5 minutes
CACHE_MAX_ITEMS=1000

# Connection Pooling
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000

# =============================================================================
# COMPLIANCE & GOVERNANCE
# =============================================================================

# Data Retention
DATA_RETENTION_ENABLED=true
DATA_RETENTION_DAYS=2555  # 7 years

# Privacy
GDPR_COMPLIANCE=true
ANONYMIZATION_ENABLED=true
RIGHT_TO_BE_FORGOTTEN=true

# Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Features
FEATURE_REAL_TIME_SYNC=true
FEATURE_CONFLICT_RESOLUTION=true
FEATURE_AUDIT_DASHBOARD=true
FEATURE_EXPORT_COMPLIANCE=true
FEATURE_WEBHOOK_NOTIFICATIONS=true

# Experimental Features
EXPERIMENTAL_ML_CONFLICT_RESOLUTION=false
EXPERIMENTAL_PREDICTIVE_SCALING=false